  <script type="text/javascript">

    jQuery(function($){
      $("#start_date").datepicker({dateFormat: 'yy-mm-dd',changeMonth: false,changeYear: false,showOn: 'button', buttonImage: 'http://jqueryui.com/resources/demos/datepicker/images/calendar.gif', buttonImageOnly: true})

    });
    jQuery(function($){
      $("#end_date").datepicker({dateFormat: 'yy-mm-dd',changeMonth: false,changeYear: false, showOn: 'button', buttonImage: 'http://jqueryui.com/resources/demos/datepicker/images/calendar.gif', buttonImageOnly: true})
    });


  </script>
 <%= form_tag search_by_date_path,:method => 'get' do %>
From Date :
<%= text_field_tag :start_date, params[:start_date]%></br>

To Date :
<%= text_field_tag :end_date, params[:end_date],onchange:"checkAndSubmit()" %></br>
     
<%end%> 
<table class="table table-striped">
<tr>
<th>Sr No.</th>
<th>Booking Date</th>
<th>Booking Area/Sq.Ft</th>
<th>Lister's Name</th>
<th>Address</th>
<th>Pickup?</th>
<th>Dropoff?</th>
<th>Pick up Date</th>
<th>Drop off Date</th>
<th>Order</th>
<th>Cancel Booking</th>
<th>Confirm Booking</th>
<th>Add Complaint's</th>
</tr>
<% @bookings.each_with_index do |booking, index|%>
<tr>

<td><%= index + 1 %></td>
<td><%= booking.created_at.to_date %></td>
<td><%= Post.find(booking.post_id).area %></td>
<td><%= User.find(booking.user_id).name %></td>
<td><%= Post.find(booking.post_id).address %></td>
	<%if Post.find(booking.post_id).pick_up == true%>
	<td><%= check_box_tag(Post.find(booking.post_id).pick_up, value = "1", checked = true, disabled: true)%></td>
	<td><%= check_box_tag(Post.find(booking.post_id).drop_off, value = "1", checked = false, disabled: true)%></td>
	<%else%>
	<td><%= check_box_tag(Post.find(booking.post_id).pick_up, value = "1", checked = false, disabled: true)%></td>
	<td><%= check_box_tag(Post.find(booking.post_id).drop_off, value = "1", checked = true, disabled: true)%></td>
	<%end%>
 <td><%= Post.find(booking.post_id).pick_up_avaibilty_start_date.strftime("%d-%m-%Y") %> - <%= Post.find(booking.post_id).pick_up_avaibility_end_date.strftime("%d-%m-%Y")%>
	</td>
 <td><%= Post.find(booking.post_id).drop_off_avaibility_start_date.strftime("%d-%m-%Y")%> - <%= Post.find(booking.post_id).drop_off_avaibility_end_date.strftime("%d-%m-%Y")%></td>
	
<td><%= link_to "View Details",{:controller => 'bookings', :action => 'show', :id => booking.id} %></td>
<td>
    <% if booking.is_confirm == false %>
    <%= link_to "Cancel Booking",cancel_booking_bookings_path(:drop_off_date =>booking.dropoff_date,:id =>booking.id) %>
    <% else %>
      booking Canceled
    <% end %>
</td>
<td>
  <% if booking.is_confirm == false %>
  <%= link_to "Confirm Booking",confirm_booking_finder_bookings_path(:id =>booking.id) %>
  <% else %>
    Confirmed
  <% end %>
</td>
<% if booking.is_confirm == false && booking.is_complaint == false%>  
 <td>

  <%= form_tag("/bookings/add_complaint", :method=>"post") do %>
    <%= label_tag "Add Complaint"%>
    <%= text_area_tag "complaint"%>
    <%= hidden_field_tag "booking_id",booking.id %>
   <%= submit_tag "submit" %>

  <% end %>
</td> 
<%else%>
  <td> status confirmed</td>
<% end %>
<td><%#= link_to format_boolean(adminuser.status?), {:controller => 'users', :action => 'toggled_status', :id => adminuser.id} %></td>
</tr>
<%end%> 
</table>

 
<script>

 function checkAndSubmit()
{
   if ($('#start_date').val() != null && $('#end_date').val() != null)
    {
      //document.getElementById('formID').submit();
      var start_date = $('#start_date').val();
      var end_date = $('#end_date').val();
      window.location.href = '/search_by_date?start_date=' + start_date +"&end_date="+end_date;
     } 
}
</script>  